From 8bd8a5c38a434ac407e7401a27205c9d0add02d7 Mon Sep 17 00:00:00 2001
From: halfmaster1 <ohpointfive@gmail.com>
Date: Fri, 7 May 2021 15:18:33 -0400
Subject: [PATCH] Fix null chunk provider crashes


diff --git a/src/main/java/org/bukkit/craftbukkit/CraftServer.java b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
index 1a92092b..1d1123fd 100644
--- a/src/main/java/org/bukkit/craftbukkit/CraftServer.java
+++ b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
@@ -933,7 +933,7 @@ public final class CraftServer implements Server {
             }
 
             chunkProviderServer.chunkLoader = null;
-            chunkProviderServer.chunkProvider = null;
+            // chunkProviderServer.chunkProvider = null; // This seems to cause crashes
             chunkProviderServer.chunks.clear();
         }
 
@@ -1319,7 +1319,7 @@ public final class CraftServer implements Server {
 
         for (JsonListEntry entry : playerList.getProfileBans().getValues()) {
             result.add(getOfflinePlayer((GameProfile) entry.getKey()));
-        }        
+        }
 
         return result;
     }
-- 
2.29.2

